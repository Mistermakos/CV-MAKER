<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Generator App</title>
    <link rel="stylesheet" href="styles/style.css">
</head>

<body>
    <header>
        <h1>CV Generator App</h1>
        Fill all of the fields
    </header>
    <form method="POST" action="/CV" enctype="multipart/form-data">
        <div id="basic-info">
            <label for="input-file" id="drop-area">
                <!-- <input type="file" accept="image/*" id="input-file" name="Photo" hidden> -->
                <input type="file" name="Photo">
                <!-- prez to image/* przeglądarka akceptuje tylko zdjęcia-->
                <img src="images/icon.png">
            </label>
            <div id="first-last-name">
                <h2>Intro details</h2>
                <span>First name</span>
                <input type="text" placeholder="Enter your first name" name="FirstName">
                <span>Last name</span>
                <input type="text" placeholder="Enter your last name" name="LastName">
            </div>
            <div id="contact">
                <h2>Contact details</h2>
                <div><img src="images/phone.png"> <input type="text" placeholder="Enter phone number" name="Phone"></div>
                <div><img src="images/mail.png"> <input type="text" placeholder="Enter email" name="Mail"></div>
                <div><img src="images/adress.png"> <input type="text" placeholder="Enter adress" name="Adress"></div>
            </div>
        </div>

        <div id="box-emp">
            <div id="employment">
                <div id="company">
                    <h2>Jobs</h2>
                    <span id="company-span">Company</span>
                    <input type="text" name="CompanyName" placeholder="Enter company name" >
                    <span id="company-span">Job title</span>
                    <input type="text" name="JobTitle" placeholder="Enter job title">
                </div>
                <div id="start-end-date">
                    <span id="company-span">Start date</span>
                    <input type="date" name="StartingDate">
                    <span id="company-span">End date</span>
                    <input type="date" name="EndingDate">
                </div>
                <div id="responsibilities">
                    <span id="company-span">Responsibilities</span>
                    <textarea cols="30" rows="10" name="Responsibilities"></textarea>
                </div>
            </div>
        </div>
        <div id="add-btn">
            <button type="button" onclick="addEmployment()">+</button>
        </div> 

        <div id="box-education">
            <div id="education">
                <div id="institution">
                    <h2>Education</h2>
                    <span id="education-span">Institution/Course</span>
                    <input type="text" name="ICName" placeholder="Enter institution/course name" >
                    <span id="education-span">Specialization</span>
                    <input type="text" name="Specialization" placeholder="Enter specialization">
                </div>
                <div id="start-end-date">
                    <span id="education-span">Start date</span>
                    <input type="date" name="StartingDate">
                    <span id="education-span">End date</span>
                    <input type="date" name="EndingDate">
                </div>
                <div id="responsibilities">
                    <span id="education-span">Qualifications</span>
                    <textarea cols="30" rows="10" name="qualifications"></textarea>
                </div>
            </div>
        </div>
        <div id="add-btn">
            <button type="button" onclick="addEducation()">+</button>
        </div>

        <div id="box-summary">
            <div id="aboutMe">
                <h2>Summary</h2>
                <span id="education-span">About me</span>
                <textarea cols="30" rows="10" name="aboutMe"></textarea>
            </div>
            </dv>
        </div>
        <input type="submit"/>
    </form>
    <script>
        const dropArea = document.getElementById("drop-area");
        const inputFile = document.getElementById("input-file");

        inputFile.addEventListener("change", uploadImage);

        function uploadImage() {
            let imgLink = URL.createObjectURL(inputFile.files[0]); // da tego file'a ktory jest zuploadowany i zamieni go na URL 
            dropArea.style.backgroundImage = `url(${imgLink})`;
            dropArea.textContent = "";
            dropArea.style.border = 0;
            dropArea.style.width = "134px !important";
        }

        dropArea.addEventListener("dragover", function (e) {
            e.preventDefault(); // usuwa defaultowy event, ze po przeciagnieciu zdjecie otwiera mi sie w nowej karcie
        });
        dropArea.addEventListener("drop", function (e) {
            e.preventDefault(); // usuwa defaultowy event, ze po przeciagnieciu zdjecie otwiera mi sie w nowej karcie
            inputFile.files = e.dataTransfer.files; // file zostaje przetransportowany do inputFile
            uploadImage();
        });

        let i = 1;
        function addEmployment() {
            document.querySelector("#box-emp").innerHTML += `<div id="employment"><div id="company">
            <h2>Jobs</h2>
            <span id="company-span">Company</span>
            <input type="text" name="CompanyName${i}" placeholder="Enter company name" >
            <span id="company-span">Job title</span>
            <input type="text" name="JobTitle${i}" placeholder="Enter job title">
        </div>
        <div id="start-end-date">
            <span id="company-span">Start date</span>
            <input type="date" name="StartingDate${i}">
            <span id="company-span">End date</span>
            <input type="date" name="EndingDate${i}">
        </div>
        <div id="responsibilities">
            <span id="company-span">Responsibilities</span>
            <textarea cols="30" rows="10" name="Responsibilities${i}"></textarea>
        </div></div>`;
            i++;
        }
    </script>
</body>

</html>
